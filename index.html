<script>
  const apiKey = "3922a8533270b8e432d01b2f719fe4fd"; // üëà Reemplaza con tu API key de OpenWeatherMap

  function fetchWeather(lat, lon) {
    const url = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&units=metric&appid=${apiKey}`;

    fetch(url)
      .then(response => response.json())
      .then(data => {
        const city = data.name;
        const temp = Math.round(data.main.temp);
        const desc = data.weather[0].description;
        const icon = data.weather[0].icon;
        const wind = data.wind.speed;
        const humidity = data.main.humidity;

        document.querySelectorAll('.city').forEach(el => el.textContent = city);
        document.querySelectorAll('.temp').forEach(el => el.textContent = `${temp}¬∞C`);
        document.querySelectorAll('.status').forEach(el => el.textContent = desc.charAt(0).toUpperCase() + desc.slice(1));
        document.querySelectorAll('.day-icon').forEach(el => {
          el.innerHTML = `<img src="https://openweathermap.org/img/wn/${icon}@2x.png" alt="icon" width="48" height="48">`;
        });

        document.querySelector('.main-info div:nth-child(1)').innerHTML += `<br>üí® ${wind} m/s &nbsp;&nbsp; üíß ${humidity}%`;
      })
      .catch(err => console.error("Error fetching weather:", err));
  }

  function getLocationAndWeather() {
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(
        position => {
          const lat = position.coords.latitude;
          const lon = position.coords.longitude;
          fetchWeather(lat, lon);
        },
        () => {
          alert("No se pudo acceder a tu ubicaci√≥n.");
        }
      );
    } else {
      alert("Tu navegador no soporta geolocalizaci√≥n.");
    }
  }

  // Ejecutar al cargar
  getLocationAndWeather();
</script>
